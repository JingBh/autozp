(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{166:function(e,t,r){"use strict";var l=r(35),o=r(34),n=r(12),d=r(96),c=r(169);l(l.P+l.R,"Promise",{finally:function(e){var t=d(this,o.Promise||n.Promise),r="function"==typeof e;return this.then(r?function(r){return c(t,e()).then((function(){return r}))}:e,r?function(r){return c(t,e()).then((function(){throw r}))}:e)}})},167:function(e,t,r){"use strict";(function(e){r(166);t.a={data:()=>({form:{username:"",password:"",flag:"",validateCode:"",remember:"no",agreeTerms:"no"},validateEnabled:!1,validateImage:"",failed:!1,failedReason:"",succeed:!1,loading:!1}),computed:{isLoggedIn(){return this.$store.state.isLoggedIn}},methods:{initForm(){this.refreshValidateCode(),this.form.password&&(this.form.remember="yes")},refreshValidateCode(){this.$axios.$get("/login/validateCode").then(data=>{if(!0===data[0]){var e=data[1];this.validateImage=e.image_url,this.form.flag=e.flag,this.validateEnabled=!0}})},loginFail(e){this.failed=!0,this.failedReason=e},submit(){this.failed=this.succeed=!1,"yes"===this.form.agreeTerms?(this.loading=!0,this.$axios.$post("/login",this.form).then(data=>{!0===data.success?(this.succeed=!0,this.$emit("reload"),this.$bvModal.hide("login-modal")):(this.loginFail(data.message),"invite"===data.redirect?(this.$store.commit("inviteVerified",!1),this.$router.push("invite")):data.reload&&this.$emit("reload"))}).catch(e=>{alert("请求出错，请稍后重试。"),console.error(e)}).finally(()=>{this.refreshValidateCode(),this.loading=!1})):this.loginFail("请先阅读并同意用户协议。")},logout(){this.$axios.$post("/logout").then(()=>this.$emit("reload"))}},created(){this.throttledRefreshValidateCode=e.throttle(this.refreshValidateCode,2e3,{leading:!0})}}}).call(this,r(95))},168:function(e,t,r){"use strict";(function(e){r(19),r(166);t.a={name:"RankPage",data:()=>({form:{orgId:"",gradeId:"",classId:"",schoolyearId:"",schoolsemesterId:""},includeGrade:!1,enableAdvanced:!1,advancedFields:{orgId:[4,"orgId"],gradeId:[3,"gradeId"],classId:[5,"classId"],schoolyearId:[6,"yearId"],schoolsemesterId:[6,"semesterId"]},result:null,loading:!1,table:{rows:0,filter:"",perPage:15,currentPage:1,fields:[{key:"id",label:"教育 ID",sortable:!0},{key:"name",label:"姓名",sortable:!0},{key:"count",label:"记录数",sortable:!0},{key:"score",label:"分数",sortable:!0}]}}),methods:{submit(){this.loading=!0;var form={};form=this.enableAdvanced?e.merge({custom:"yes"},this.form):{custom:"no",grade:this.includeGrade?"yes":"no"},this.$axios.$get("user/rank",{params:form}).then(data=>{this.result=data,this.table.rows=data.length}).catch(e=>{console.error(e),alert("查询失败。")}).finally(()=>{this.loading=!1})},defaultValues(){this.includeGrade=!1,this.enableAdvanced=!1,this.hasResult=!1,this.loading=!1;var e=this.$store.state.userInfo;if(e&&e.term)for(var t in this.advancedFields){var r=this.advancedFields[t][1];this.form[t]=e.term[r].toString()||""}},onFiltered(e){this.table.rows=e.length,this.table.currentPage=1}},mounted(){this.defaultValues()}}}).call(this,r(95))},169:function(e,t,r){var l=r(11),o=r(18),n=r(170);e.exports=function(e,t){if(l(e),o(t)&&t.constructor===e)return t;var r=n.f(e);return(0,r.resolve)(t),r.promise}},170:function(e,t,r){"use strict";var l=r(52);function o(e){var t,r;this.promise=new e((function(e,l){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=l})),this.resolve=l(t),this.reject=l(r)}e.exports.f=function(e){return new o(e)}},171:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MENGN0MyQzkxQzg2MTFFOTk4NzRDNDc3M0MwREEzQ0YiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MENGN0MyQ0ExQzg2MTFFOTk4NzRDNDc3M0MwREEzQ0YiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowQ0Y3QzJDNzFDODYxMUU5OTg3NEM0NzczQzBEQTNDRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowQ0Y3QzJDODFDODYxMUU5OTg3NEM0NzczQzBEQTNDRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjcVlV4AABeaSURBVHja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"},172:function(e,t,r){"use strict";r.r(t);r(166);var l=r(67),o=r(167).a,n=r(13),d=Object(n.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.isLoggedIn?r("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"outline-danger"},on:{click:e.logout}},[e._v("登出")]):r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.login-modal",modifiers:{"login-modal":!0}}],staticClass:"mt-3",attrs:{block:"",variant:"outline-primary"}},[e._v("登录")]),e._v(" "),r("b-modal",{attrs:{id:"login-modal",title:"登录综评系统"},on:{show:e.initForm},scopedSlots:e._u([{key:"default",fn:function(){return[r("p",[e._v("请输入"),r("strong",[e._v("综评系统")]),e._v("的用户名和密码来登录。")]),e._v(" "),r("b-form",[r("b-form-group",{attrs:{label:"教育ID","label-for":"inputUsername"}},[r("b-input",{attrs:{type:"text",id:"inputUsername",placeholder:"请输入教育ID",minlength:"8",maxlength:"8",autocomplete:"username",required:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),r("b-form-group",{attrs:{label:"密码","label-for":"inputPassword"}},[r("b-input",{attrs:{type:"password",id:"inputPassword",placeholder:"请输入密码",autocomplete:"current-password",required:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),r("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.validateEnabled,expression:"validateEnabled"}],attrs:{label:"验证码","label-for":"inputValidateCode"}},[r("b-input-group",[r("b-input",{attrs:{type:"text",id:"inputValidateCode",placeholder:"请输入验证码"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.form.validateCode,callback:function(t){e.$set(e.form,"validateCode",t)},expression:"form.validateCode"}}),e._v(" "),r("b-input-group-append",{staticClass:"input-group-append"},[r("img",{staticClass:"border",attrs:{alt:"验证码",title:"验证码图片",id:"loginValidateCodeImage",src:e.validateImage},on:{click:e.throttledRefreshValidateCode}})])],1)],1),e._v(" "),r("b-form-group",[r("b-form-checkbox",{attrs:{value:"yes","unchecked-value":"no",switch:""},model:{value:e.form.remember,callback:function(t){e.$set(e.form,"remember",t)},expression:"form.remember"}},[e._v("\n            允许 AutoZP 存储密码\n          ")]),e._v(" "),r("b-form-text",{staticClass:"small text-muted"},[r("strong",[e._v("一些高级功能需要存储密码才可用")]),e._v("，详见用户协议。")])],1),e._v(" "),r("b-form-group",[r("b-form-checkbox",{attrs:{value:"yes","unchecked-value":"no"},model:{value:e.form.agreeTerms,callback:function(t){e.$set(e.form,"agreeTerms",t)},expression:"form.agreeTerms"}},[e._v("\n            已阅读并同意 "),r("nuxt-link",{attrs:{to:"/terms",target:"_blank"}},[e._v("AutoZP 用户协议")]),e._v("。\n          ")],1)],1),e._v(" "),r("p",{staticClass:"small mb-0",class:e.loading?"text-info":"text-muted"},[e._v("登录操作需要大约 10 秒的时间，请耐心等待。")]),e._v(" "),r("transition",{attrs:{name:"fadeDown"}},[e.failed?r("p",{staticClass:"text-danger mb-0 mt-2"},[e._v("登录失败："+e._s(e.failedReason)),r("span")]):e._e(),e._v(" "),e.succeed?r("p",{staticClass:"text-success mb-0 mt-2"},[e._v("登录成功！")]):e._e()])],1)]},proxy:!0},{key:"modal-footer",fn:function(t){var l=t.cancel;return[r("b-button",{attrs:{variant:"secondary"},on:{click:l}},[e._v("取消")]),e._v(" "),r("transition",{attrs:{name:"fadeRight"}},["yes"===e.form.agreeTerms?r("b-button",{attrs:{variant:"primary",disabled:e.loading},on:{click:e.submit}},[e.loading?r("span",[r("b-spinner",{attrs:{small:""}}),e._v(" 请稍候...")],1):r("span",[e._v("登录")])]):e._e()],1)]}}])})],1)}),[],!1,null,null,null).exports,c=r(171),m={data:()=>({avatarUrl:c,score:null,scoreFailed:!1,photoLoaded:!1}),computed:{isLoggedIn(){return this.$store.state.isLoggedIn},userInfo(){return this.$store.state.userInfo}},methods:{getScore(){this.scoreFailed=!1,this.score=null,this.$axios.$get("/user/score").then(data=>{data[1]?this.score=data[1].score:this.scoreFailed=!0})},defaultAvatar(){this.avatarUrl=c,this.photoLoaded=!1},requestPhoto(){!1===this.photoLoaded&&this.$bvModal.msgBoxConfirm("您是否同意 AutoZP 通过您的信息尝试查找您的照片？",{title:"隐私确认",okVariant:"success",okTitle:"同意",cancelTitle:"取消",hideHeaderClose:!1}).then(e=>{!0===e&&(this.photoLoaded=!0,this.avatarUrl="https://api.autozp.me/user/photo")})}},created(){this.getScore(),this.defaultAvatar()}},v=Object(n.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-media",{scopedSlots:e._u([{key:"aside",fn:function(){return[r("img",{style:{cursor:e.photoLoaded?"":"pointer"},attrs:{id:"userAvatar",alt:"头像",src:e.avatarUrl},on:{error:e.defaultAvatar,click:e.requestPhoto}})]},proxy:!0}])},[e._v(" "),r("h3",{staticClass:"my-0 font-weight-light"},[e._v(e._s(e.userInfo.name)+"\n    "),"男"===e.userInfo.gender?r("small",{staticClass:"font-weight-bold",staticStyle:{color:"deepskyblue"}},[e._v("♂")]):e._e(),e._v(" "),"女"===e.userInfo.gender?r("small",{staticClass:"font-weight-bold",staticStyle:{color:"lightpink"}},[e._v("♀")]):e._e()]),e._v(" "),r("p",{staticClass:"my-0"},[e._v(e._s(e.userInfo.school))]),e._v(" "),r("p",{staticClass:"my-0"},[e._v("分数：\n    "),null==e.score?r("b-spinner",{attrs:{small:"",variant:"primary"}}):e.scoreFailed?r("span",{staticClass:"text-danger"},[e._v("获取失败！")]):r("strong",[e._v(e._s(e.score))])],1)])}),[],!1,null,null,null).exports,f=r(168).a,h=Object(n.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",[e._v("您可以在这里查询同学们的分数和排名。")]),e._v(" "),r("b-form",[r("b-form-group",{directives:[{name:"show",rawName:"v-show",value:!e.enableAdvanced,expression:"!enableAdvanced"}]},[r("b-form-checkbox",{attrs:{switch:""},model:{value:e.includeGrade,callback:function(t){e.includeGrade=t},expression:"includeGrade"}},[e._v("包含全年级同学")])],1),e._v(" "),r("b-form-group",[r("b-form-checkbox",{attrs:{switch:""},model:{value:e.enableAdvanced,callback:function(t){e.enableAdvanced=t},expression:"enableAdvanced"}},[e._v("高级查询")])],1),e._v(" "),r("transition",{attrs:{name:"fade",mode:"out-in"}},[r("b-form-row",{directives:[{name:"show",rawName:"v-show",value:e.enableAdvanced,expression:"enableAdvanced"}],staticClass:"mt-n2"},e._l(e.advancedFields,(function(data,t){return r("b-col",{key:t,attrs:{cols:data[0]}},[r("b-form-group",{staticClass:"mb-2",attrs:{"label-class":"small text-muted",label:t,"label-for":"inputRankParam_"+t}},[r("b-form-input",{attrs:{size:"sm",id:"inputRankParam_"+t},model:{value:e.form[t],callback:function(r){e.$set(e.form,t,r)},expression:"form[name]"}})],1)],1)})),1)],1),e._v(" "),r("b-form-group",[r("b-button",{staticClass:"mt-2 px-4",attrs:{variant:"primary",disabled:e.loading},on:{click:e.submit}},[e.loading?r("span",[r("b-spinner",{attrs:{small:""}}),e._v(" 请稍候...")],1):r("span",[e._v("查询")])])],1)],1),e._v(" "),e.result?r("div",[r("hr"),e._v(" "),r("div",{staticClass:"mb-2 text-right"},[e.loading?e._e():r("b-form-input",{staticClass:"d-inline-block",staticStyle:{"max-width":"15rem"},attrs:{type:"search",placeholder:"搜索数据...",autocomplete:"off",size:"sm"},model:{value:e.table.filter,callback:function(t){e.$set(e.table,"filter",t)},expression:"table.filter"}})],1),e._v(" "),r("b-table",{staticClass:"text-nowrap",attrs:{small:"",hover:"",responsive:"","show-empty":"","primary-key":"id",filter:e.table.filter,"sort-by":"score","sort-desc":"",items:e.result,fields:e.table.fields,busy:e.loading,"per-page":e.table.perPage,"current-page":e.table.currentPage,dark:"dark"===e.$colorMode.value},on:{filtered:e.onFiltered},scopedSlots:e._u([{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center text-primary my-2"},[r("b-spinner",{staticClass:"align-middle mr-2"}),e._v(" "),r("strong",[e._v("数据加载中...")])],1)]},proxy:!0}],null,!1,2310147616)}),e._v(" "),e.loading?e._e():r("b-pagination",{attrs:{align:"right","first-number":"","last-number":"","total-rows":e.table.rows,"per-page":e.table.perPage},model:{value:e.table.currentPage,callback:function(t){e.$set(e.table,"currentPage",t)},expression:"table.currentPage"}})],1):e._e()],1)}),[],!1,null,null,null).exports,k={name:"RecordsPage",data:()=>({result:null,loading:!1,infoData:{},table:{rows:0,filter:"",perPage:15,currentPage:1,fields:[{key:"title",label:"标题",sortable:!0},{key:"score",label:"分数",sortable:!0,formatter:e=>Math.round(100*Number(e))/100},{key:"submitter",label:"提交者",sortable:!0,class:"d-none d-sm-table-cell"},{key:"date",label:"提交时间",sortable:!0,class:"d-none d-md-table-cell"},{key:"actions",label:"",class:"text-right"}]}}),methods:{getData(){this.loading=!0,this.$axios.$get("user/records").then(data=>{this.result=data,this.table.rows=data.length}).catch(e=>{console.error(e),alert("查询失败。")}).finally(()=>{this.loading=!1})},info(data){this.infoData=data,this.$refs.infoModal.show()},onFiltered(e){this.table.rows=e.length,this.table.currentPage=1},onInfoHide(){this.infoData={}}},created(){this.getData()}},y=Object(n.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"mb-2 text-right"},[e.loading?e._e():r("b-form-input",{staticClass:"d-inline-block",staticStyle:{"max-width":"15rem"},attrs:{type:"search",placeholder:"搜索数据...",autocomplete:"off",size:"sm"},model:{value:e.table.filter,callback:function(t){e.$set(e.table,"filter",t)},expression:"table.filter"}})],1),e._v(" "),r("b-table",{staticClass:"text-nowrap",attrs:{hover:"",responsive:"","show-empty":"","primary-key":"id",filter:e.table.filter,"sort-by":"date","sort-desc":"",items:e.result,fields:e.table.fields,busy:e.loading,"per-page":e.table.perPage,"current-page":e.table.currentPage,dark:"dark"===e.$colorMode.value},on:{filtered:e.onFiltered},scopedSlots:e._u([{key:"cell(score)",fn:function(data){return[data.value<0?r("strong",{staticClass:"text-danger"},[e._v("-"+e._s(data.value))]):data.value>0?r("strong",{staticClass:"text-success"},[e._v("+"+e._s(data.value))]):r("strong",[e._v(e._s(data.value))])]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(r){return e.info(t.item)}}},[r("span",{staticClass:"d-none d-sm-inline"},[e._v("查看")]),e._v("详情\n      ")])]}},{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center text-primary my-2"},[r("b-spinner",{staticClass:"align-middle mr-2"}),e._v(" "),r("strong",[e._v("数据加载中...")])],1)]},proxy:!0}])}),e._v(" "),e.loading?e._e():r("b-pagination",{attrs:{align:"right","first-number":"","last-number":"","total-rows":e.table.rows,"per-page":e.table.perPage},model:{value:e.table.currentPage,callback:function(t){e.$set(e.table,"currentPage",t)},expression:"table.currentPage"}}),e._v(" "),r("b-modal",{ref:"infoModal",attrs:{"ok-only":"","ok-title":"关闭","ok-variant":"success",title:e.infoData.title},on:{hide:e.onInfoHide}},[r("p",{staticClass:"mb-3"},[e._v(e._s(e.infoData.content))]),e._v(" "),r("p",{staticClass:"small mt-1 mb-0"},[r("span",{staticClass:"text-muted"},[e._v("上传者：")]),e._v(" "),r("strong",[e._v(e._s(e.infoData.submitter))])]),e._v(" "),r("p",{staticClass:"small mt-1 mb-0"},[r("span",{staticClass:"text-muted"},[e._v("提交时间：")]),e._v(" "),r("strong",[e._v(e._s(e.infoData.date))])]),e._v(" "),r("p",{staticClass:"small mt-1 mb-0"},[r("span",{staticClass:"text-muted"},[e._v("分数：")]),e._v(" "),e.infoData.score<0?r("strong",{staticClass:"text-danger"},[e._v("-"+e._s(e.infoData.score))]):e.infoData.score>0?r("strong",{staticClass:"text-success"},[e._v("+"+e._s(e.infoData.score))]):r("strong",[e._v(e._s(e.infoData.score))])])])],1)}),[],!1,null,null,null).exports,x={components:{Logo:l.a,LoginForm:d,UserInfo:v,RankPage:h,RecordsPage:y},data:()=>({userInfoLoaded:!1}),computed:{isLoggedIn(){return this.$store.state.isLoggedIn}},methods:{reload(){this.userInfoLoaded=!1,this.$axios.$get("user/info").then(data=>{this.$store.commit("updateUserInfo",data[1])}).finally(()=>{this.userInfoLoaded=!0})}},created(){this.reload()}},C=Object(n.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"my-3 mt-md-5"},[r("b-row",[r("b-col",{attrs:{cols:"auto",sm:"",id:"logoSection"}},[r("h1",{staticClass:"mb-1"},[r("logo")],1),e._v(" "),r("p",{staticClass:"mb-0"},[e._v("一个"),r("span",{staticClass:"font-weight-light mx-1"},[e._v("极简")]),e._v("综评系统客户端")])]),e._v(" "),r("b-col",{attrs:{col:"",sm:"5",md:"4",lg:"3",xl:"2"}},[e.userInfoLoaded?r("login-form",{on:{reload:e.reload}}):e._e()],1)],1),e._v(" "),r("hr"),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:!e.userInfoLoaded,expression:"!userInfoLoaded"}],staticClass:"text-info",attrs:{id:"userInfoLoading"}},[r("b-spinner",{attrs:{small:""}}),e._v("\n    正在加载用户信息...\n  ")],1),e._v(" "),e.isLoggedIn?r("div",[r("user-info"),e._v(" "),r("b-tabs",{staticClass:"mt-3",attrs:{"content-class":"mt-2"}},[r("b-tab",{attrs:{title:"记录",active:""}},[r("records-page")],1),e._v(" "),r("b-tab",{attrs:{title:"排名"}},[r("rank-page")],1),e._v(" "),r("b-tab",{attrs:{title:"上传",lazy:"",disabled:""}}),e._v(" "),r("b-tab",{attrs:{title:"计划",lazy:"",disabled:""}})],1)],1):e._e()],1)}),[],!1,null,null,null);t.default=C.exports}}]);